{% extends "base.html.twig" %}

{% block title %}429 Too Many Requests - {{ page_title|default('WindBlog') }}{% endblock %}

{% block content %}
    <div class="min-h-[60vh] flex items-center justify-center">
        <div class="tui-box max-w-lg w-full text-center font-mono" data-title="ERROR 429">
            <div class="mb-6">
                <span class="text-6xl text-purple-500 font-bold">429</span>
            </div>
            <h2 class="text-2xl font-bold text-gray-300 mb-4">Too Many Requests</h2>
            <p class="text-gray-500 mb-4">
                You have exceeded the rate limit. Please try again later.
            </p>

            {% if retry_after %}
                <div class="border border-purple-900 bg-purple-900/20 p-4 mb-8">
                    <p class="text-purple-400 text-sm">
                        Retry in <span class="font-bold text-white" id="countdown">{{ retry_after }}</span> seconds
                    </p>
                </div>
                <script>
                    let seconds = {{ retry_after }};
                    const countdown = document.getElementById('countdown');
                    const timer = setInterval(() => {
                        seconds--;
                        countdown.textContent = seconds;
                        if (seconds <= 0) {
                            clearInterval(timer);
                            location.reload();
                        }
                    }, 1000);
                </script>
            {% endif %}

            <div class="flex gap-4 justify-center">
                <a href="/"
                   class="px-6 py-2 border border-green-500 text-green-500 hover:bg-green-900 hover:text-white transition-colors">
                    [Return Home]
                </a>
            </div>
        </div>
    </div>
{% endblock %}
