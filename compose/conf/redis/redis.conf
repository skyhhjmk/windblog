# ================================= 基础配置 =================================
# 端口号（默认6379）
port 6379

# 绑定IP（默认只注释，允许所有IP访问；生产环境建议指定具体IP，如 127.0.0.1 或内网IP）
bind 0.0.0.0

# 保护模式（默认yes，仅允许本地连接或密码认证；关闭需同时配置bind或密码）
protected-mode no

# 用户名-权限-密码
user default on +@all ~* &* >YourStrongPassword123!

# 客户端超时时间（秒，0表示永不超时；建议设置300-1800秒避免闲置连接）
timeout 300

# TCP连接队列长度（高并发场景可调大，如 1024）
tcp-backlog 511


# ================================= 内存配置 =================================
# 最大内存限制（根据服务器内存设置，如 4GB 写成 4g）
maxmemory 4g

# 内存满时的淘汰策略（缓存场景常用volatile-lru或allkeys-lru）
# volatile-lru：只淘汰设置了过期时间的键（推荐）
# allkeys-lru：淘汰所有键中最少使用的
# volatile-ttl：淘汰即将过期的键
maxmemory-policy volatile-lru


# ================================= 持久化配置 =================================
# 1. RDB配置（快照持久化）
# 关闭RDB（纯缓存场景推荐）：save ""
# 开启RDB（按时间+修改次数触发，按需保留）
# 3600秒内有1次修改则触发
# save 3600 1
# 1800秒内有10次修改则触发
# save 1800 10
# 60秒内有10000次修改则触发
# save 60 10000

# RDB文件压缩（yes节省空间，no提升性能；纯缓存可设no）
rdbcompression yes

# RDB文件校验（yes增加安全性，no提升性能）
rdbchecksum yes

appendonly no

databases 2

