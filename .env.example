# 复制此文件为 .env 并根据需要修改配置
# 实例部署类型
DEPLOYMENT_TYPE=datacenter

# 数据库配置 - PGSQL
DB_DEFAULT=pgsql
DB_PGSQL_HOST=localhost
DB_PGSQL_PORT=5432
DB_PGSQL_DATABASE=windblog
DB_PGSQL_USERNAME=postgres
DB_PGSQL_PASSWORD=postgres

# 缓存配置
# CACHE_DRIVER 可选：none | memory | array | apcu | memcached | redis
# - none: 完全禁用缓存
# - memory/array: 进程内内存缓存（仅当前PHP进程/worker内有效，适合开发/单机）
# - apcu: 需开启 APCu 扩展；如在 CLI/常驻进程下需确保 php.ini 中 apc.enable_cli=1
# - memcached: 需安装 Memcached 扩展，使用 MEMCACHED_HOST/MEMCACHED_PORT
# - redis: 使用 REDIS_* 配置
CACHE_DRIVER=redis

# 缓存键前缀，用于避免缓存键冲突，可为空或自定义字符串
CACHE_PREFIX=

# 默认缓存过期时间（秒），默认为86400秒（24小时）
CACHE_DEFAULT_TTL=86400

# 负面缓存过期时间（秒），用于缓存不存在的数据结果，防止缓存穿透，默认30秒
CACHE_NEGATIVE_TTL=30

# 缓存抖动时间（秒），用于给缓存过期时间添加随机值，防止缓存雪崩，默认0秒
CACHE_JITTER_SECONDS=0

# 缓存忙等待时间（毫秒），当缓存正在重建时，其他请求等待的时间，默认50毫秒
CACHE_BUSY_WAIT_MS=50

# 缓存忙等待最大重试次数，当缓存正在重建时，最多重试次数，默认3次
CACHE_BUSY_MAX_RETRIES=3

# 缓存锁过期时间（毫秒），用于防止缓存击穿，默认3000毫秒（3秒）
CACHE_LOCK_TTL_MS=3000

# Redis服务器主机地址
REDIS_HOST=127.0.0.1

# Redis服务器端口
REDIS_PORT=6379

# Redis密码，如果未设置密码则留空
REDIS_PASSWORD=

# Redis数据库索引，项目使用多库架构（DB0+DB1），此选项不可用
#REDIS_DATABASE=1

# Memcached服务器主机地址
MEMCACHED_HOST=127.0.0.1

# Memcached服务器端口
MEMCACHED_PORT=11211

# 缓存严格模式，设为true时会抛出异常而非尝试切换缓存器自愈
CACHE_STRICT_MODE=false

# ========================================
# 安全配置
# ========================================

# 安全响应头配置
SECURITY_X_FRAME_OPTIONS=SAMEORIGIN
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin

# CSP (Content Security Policy) - 设为true启用，需要根据实际情况调整
SECURITY_CSP_ENABLED=false

# HSTS (HTTP Strict Transport Security) - 仅HTTPS环境下启用
SECURITY_FORCE_HSTS=false
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_HSTS_INCLUDE_SUBDOMAINS=true
SECURITY_HSTS_PRELOAD=false

# 信任的代理IP（逗号分隔）
TRUSTED_PROXIES=

# IP访问控制（逗号分隔）
IP_WHITELIST=
IP_BLACKLIST=

# 文件上传安全
MAX_UPLOAD_SIZE=20971520

# Session安全
SESSION_SECURE=false
SESSION_HTTPONLY=true
SESSION_SAMESITE=Lax

# CORS配置
CORS_ALLOWED_ORIGINS=
CORS_ALLOW_CREDENTIALS=false
CORS_MAX_AGE=86400

# ========================================
# Twig模板配置
# ========================================

# APP_DEBUG=false
# TWIG_CACHE_ENABLE=true
# TWIG_CACHE_PATH=runtime/twig_cache
# TWIG_AUTO_RELOAD=false
#
# 默认策略说明：
# - 当 APP_DEBUG=false（生产环境），默认：启用缓存、禁用 debug、禁用 auto_reload
# - 当 APP_DEBUG=true（开发环境），默认：关闭缓存、启用 debug、启用 auto_reload
# - 若设置 TWIG_CACHE_ENABLE，则优先生效（true 启用缓存，false 关闭缓存）
# - 若设置 TWIG_AUTO_RELOAD，则优先生效（true 开启自动重载，false 关闭）
# - 缓存目录默认为 runtime/twig_cache，可用 TWIG_CACHE_PATH 覆盖

# Push 配置
PUSH_ENABLE=true
PUSH_WEBSOCKET=websocket://0.0.0.0:3131
PUSH_API=http://0.0.0.0:3232
PUSH_APP_KEY=e9d56e94590f9f922259c05c1753e5f8
PUSH_APP_SECRET=769a66dccaf5404b196a72bcefc31d48
PUSH_CHANNEL_HOOK=http://127.0.0.1:8787/plugin/webman/push/hook
PUSH_AUTH=/plugin/webman/push/auth
