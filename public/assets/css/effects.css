/* Effects: glassmorphism, ambient lights, wide-gamut/HDR tweaks */
:root {
    /* sRGB fallbacks */
    --accent: #667eea;
    --accent-2: #764ba2;
    --ambient-1: rgba(102, 126, 234, 0.18);
    --ambient-2: rgba(118, 75, 162, 0.16);
}

@media (color-gamut: p3) {
    :root {
        /* Wide-gamut colors for supported displays (Safari/Chrome on P3 screens) */
        --accent: color(display-p3 0.40 0.49 0.93);
        --accent-2: color(display-p3 0.60 0.35 0.72);
        --ambient-1: color(display-p3 0.40 0.49 0.93 / 0.20);
        --ambient-2: color(display-p3 0.60 0.35 0.72 / 0.18);
    }
}

/* Ambient background for the page */
body.ambient-bg {
    background: radial-gradient(1200px 600px at 15% 0%, var(--ambient-1) 0%, rgba(102, 126, 234, 0) 55%),
    radial-gradient(1000px 500px at 85% 0%, var(--ambient-2) 0%, rgba(118, 75, 162, 0) 58%),
    linear-gradient(to bottom, var(--bg, #f7f9fc) 0%, var(--bg-2, #eef2f7) 100%) !important;
}

html[data-theme="dark"] body.ambient-bg {
    background: radial-gradient(900px 480px at 10% -10%, rgba(99, 102, 241, 0.18) 0%, rgba(99, 102, 241, 0) 60%),
    radial-gradient(900px 520px at 90% -10%, rgba(147, 51, 234, 0.16) 0%, rgba(147, 51, 234, 0) 62%),
    linear-gradient(to bottom, var(--bg, #0b0f19) 0%, var(--bg-2, #0b0f19) 100%) !important;
}

/* Glassmorphism utilities */
.glass {
    background: rgba(255, 255, 255, 0.70);
    border: 1px solid rgba(17, 24, 39, 0.06);
    backdrop-filter: saturate(160%) blur(16px);
    -webkit-backdrop-filter: saturate(160%) blur(16px);
}

html[data-theme="dark"] .glass {
    background: rgba(17, 24, 39, 0.65);
    border-color: rgba(255, 255, 255, 0.06);
}

@supports not ((backdrop-filter: blur(16px)) or (-webkit-backdrop-filter: blur(16px))) {
    .glass {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
    }
}

.glass-card {
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06), 0 2px 6px rgba(0, 0, 0, 0.04);
}

/* Stronger nav styling with subtle border and shadow */
.glass-nav {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-bottom: 1px solid rgba(17, 24, 39, 0.06);
}

html[data-theme="dark"] .glass-nav {
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.40);
    border-bottom-color: rgba(255, 255, 255, 0.06);
}

/* Panels (dropdowns, popovers, search results, side menu) */
.glass-panel {
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(17, 24, 39, 0.06);
    backdrop-filter: saturate(160%) blur(14px);
    -webkit-backdrop-filter: saturate(160%) blur(14px);
}

html[data-theme="dark"] .glass-panel {
    background: rgba(17, 24, 39, 0.80);
    border-color: rgba(255, 255, 255, 0.06);
}

/* Glow on hover for interactive cards/links */
.glow-on-hover {
    transition: transform .24s ease, box-shadow .24s ease, border-color .24s ease;
}

.glow-on-hover:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 32px rgba(102, 126, 234, 0.25), 0 4px 10px rgba(118, 75, 162, 0.15);
}

html[data-theme="dark"] .glow-on-hover:hover {
    box-shadow: 0 18px 40px rgba(99, 102, 241, 0.35), 0 6px 16px rgba(147, 51, 234, 0.20);
}

/* Accent underline for nav items */
.nav-underline {
    background: linear-gradient(90deg, var(--accent), var(--accent-2));
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
    .glow-on-hover {
        transition: none;
    }

    .glow-on-hover:hover {
        transform: none;
        box-shadow: none;
    }
}

/* HDR tweaks: stronger lights on HDR-capable displays */
@media (dynamic-range: high) {
    .glow-on-hover:hover {
        box-shadow: 0 22px 60px color(display-p3 0.40 0.49 0.93 / 0.45),
        0 8px 24px color(display-p3 0.60 0.35 0.72 / 0.28);
    }

    body.ambient-bg {
        background: radial-gradient(1200px 600px at 15% 0%, color(display-p3 0.40 0.49 0.93 / 0.24) 0%, rgba(0, 0, 0, 0) 58%),
        radial-gradient(1000px 520px at 85% 0%, color(display-p3 0.60 0.35 0.72 / 0.22) 0%, rgba(0, 0, 0, 0) 60%),
        linear-gradient(to bottom, var(--bg, #f7f9fc) 0%, var(--bg-2, #eef2f7) 100%) !important;
    }

    html[data-theme="dark"] body.ambient-bg {
        background: radial-gradient(900px 480px at 10% -10%, color(display-p3 0.40 0.49 0.93 / 0.25) 0%, rgba(0, 0, 0, 0) 62%),
        radial-gradient(900px 520px at 90% -10%, color(display-p3 0.73 0.34 0.76 / 0.22) 0%, rgba(0, 0, 0, 0) 64%),
        linear-gradient(to bottom, var(--bg, #0b0f19) 0%, var(--bg-2, #0b0f19) 100%) !important;
    }
}

/* HDR indicator badge */
.hdr-badge {
    position: fixed;
    left: 16px;
    bottom: 16px;
    z-index: 50;
    display: none;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border-radius: 9999px;
    font-size: 12px;
    font-weight: 700;
    line-height: 1;
    color: #111827;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.20);
}

html[data-theme="dark"] .hdr-badge {
    color: var(--text, #e5e7eb);
    box-shadow: 0 6px 20px rgba(99, 102, 241, 0.30);
}

.hdr-badge i {
    color: var(--accent);
}

@media (dynamic-range: high) {
    .hdr-badge {
        display: flex;
    }
}
